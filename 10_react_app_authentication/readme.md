# React App with amplify

## How to create it

### On AWS

From [AWS Appsync](https://eu-west-1.console.aws.amazon.com/appsync/home?region=eu-west-1#/create) select `Task App` from `Start from a sample project` and start.\
On [Cognito](https://eu-west-1.console.aws.amazon.com/cognito/users/?region=eu-west-1#/) create a user in the pool and assign in to group `ManagerGroup`.\
Back on AWS Appsync, on `Queries` menu, you can play:

    - run query without being logged
    - run query while being logged with created user, and create task
    - change user group, logout, login and run again some queries to check authorization

### On your repository

Simple check on accessing AWS Appsync schema with Cognito access through Apollo 3 (<https://docs.amplify.aws/lib/graphqlapi/authz/q/platform/js#using-amplify-graphql-client>).

Download the javascript config from AWS AppSync (aws-exports.js) and add user and password that should look like that:

```json
// WARNING: DO NOT EDIT. This file is automatically generated by AWS Amplify. It will be overwritten.

const awsmobile =  {
    "aws_appsync_graphqlEndpoint": "https://xxxxxx.appsync-api.xxxx.amazonaws.com/graphql",
    "aws_appsync_region": "xxx",
    "aws_appsync_authenticationType": "AMAZON_COGNITO_USER_POOLS",
    "aws_cognito_identity_pool_id": "xxx:xxxxx",
    "aws_cognito_region": "xxx",
    "aws_user_pools_id": "xxxx",
    "aws_user_pools_web_client_id": "xxxx",
    "oauth": {},
};

export default awsmobile;
```

Then you can simply run this:

```bash
./install.sh
yarn start
```
