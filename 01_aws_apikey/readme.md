# AWS AppSync with APIKEY

Simple check on accessing AWS AppSync schema with API KEY access (<https://docs.amplify.aws/lib/graphqlapi/getting-started/q/platform/js#configure-your-application>).

You can create your API through [AWS console](https://eu-west-1.console.aws.amazon.com/appsync/home?region=eu-west-1#/create).

You can check the access with this:

```bash
# Change region if needed, set your url and apikey
region='eu-west-1'
apiurl="https://xxxxxx.appsync-api.${region}.amazonaws.com/graphql"
apikey='xxxx'
query='{ "query": "{ __schema { types { name } } }" }'

# Get the schema of your API
curl -XPOST -H "Content-Type:application/graphql" -H "x-api-key:${apikey}" -d "$query" "$apiurl"
```

Download the javascript config from AWS AppSync (aws-exports.js) that should look like that:

```json
// WARNING: DO NOT EDIT. This file is automatically generated by AWS Amplify. It will be overwritten.

const awsmobile =  {
    "aws_appsync_graphqlEndpoint": "https://xxxxxx.appsync-api.xxxx.amazonaws.com/graphql",
    "aws_appsync_region": "xxx",
    "aws_appsync_authenticationType": "API_KEY",
    "aws_appsync_apiKey": "xxxx",
};

export default awsmobile;
```

Then you can simply run this:

```bash
./install.sh
yarn start
```
